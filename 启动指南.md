# RAG çŸ¥è¯†åº“ç³»ç»Ÿ - å¯åŠ¨æŒ‡å—

## ğŸ“‹ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å‰ç«¯æœåŠ¡                              â”‚
â”‚                   Vue 3 + Vite (5173)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Go åç«¯æœåŠ¡ (8080)                      â”‚
â”‚              Gin + GORM + JWT + gRPC Client                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Python AI æœåŠ¡ (50051)                     â”‚
â”‚           LlamaIndex + gRPC Server + OpenAI API             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      åŸºç¡€è®¾æ–½æœåŠ¡                            â”‚
â”‚  PostgreSQL | Redis | Kafka | MinIO | Qdrant               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### æ­¥éª¤ 1ï¼šå¯åŠ¨åŸºç¡€è®¾æ–½ï¼ˆDockerï¼‰

```bash
cd /Users/liang/projectljx/ragljx

# å¯åŠ¨æ‰€æœ‰åŸºç¡€è®¾æ–½æœåŠ¡
docker-compose -f docker-compose.infra.yml up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose -f docker-compose.infra.yml ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose -f docker-compose.infra.yml logs -f
```

**åŸºç¡€è®¾æ–½æœåŠ¡åˆ—è¡¨**ï¼š
- âœ… PostgreSQL (5432) - æ•°æ®åº“
- âœ… Redis (6379) - ç¼“å­˜
- âœ… Kafka (19092) - æ¶ˆæ¯é˜Ÿåˆ—
- âœ… MinIO (9000, 9001) - å¯¹è±¡å­˜å‚¨
- âœ… Qdrant (6333, 6334) - å‘é‡æ•°æ®åº“

### æ­¥éª¤ 2ï¼šå¯åŠ¨ Python AI æœåŠ¡

**æ–¹æ³• Aï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰**

```bash
# åœ¨æ–°ç»ˆç«¯çª—å£ä¸­æ‰§è¡Œ
cd /Users/liang/projectljx/ragljx
./start_python.sh
```

**æ–¹æ³• Bï¼šæ‰‹åŠ¨å¯åŠ¨**

```bash
cd /Users/liang/projectljx/ragljx/ragljx_py

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆé¦–æ¬¡ï¼‰
python3 -m venv venv
source venv/bin/activate

# å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡ï¼‰
pip install -r requirements.txt

# è®¾ç½®ç¯å¢ƒå˜é‡
export RAGLJX_DB_HOST=localhost
export RAGLJX_DB_PORT=5432
export RAGLJX_DB_DATABASE=ragljx
export RAGLJX_DB_USERNAME=ragljx
export RAGLJX_DB_PASSWORD=ragljx_password
export RAGLJX_QDRANT_HOST=localhost
export RAGLJX_QDRANT_PORT=6333
export RAGLJX_MINIO_ENDPOINT=localhost:9000
export RAGLJX_MINIO_ACCESS_KEY=minioadmin
export RAGLJX_MINIO_SECRET_KEY=minioadmin
export RAGLJX_GRPC_HOST=0.0.0.0
export RAGLJX_GRPC_PORT=50051

# AI é…ç½®
export EMBEDDING_API_KEY=sk-zk227c9ec189d0bb39972d22b03b30a619e692524568ce2c
export EMBEDDING_API_BASE=https://api.zhizengzeng.com/v1
export EMBEDDING_MODEL=text-embedding-3-small
export CHAT_API_KEY=sk-7ed50a0e6d0a4fe4862d2f33e6ce878e
export CHAT_API_BASE=https://api.deepseek.com/v1
export CHAT_MODEL=deepseek-chat

# å¯åŠ¨æœåŠ¡
python main.py
```

**é¢„æœŸè¾“å‡º**ï¼š
```
VectorService initialized with Qdrant at localhost:6333
Using embedding model: text-embedding-3-small
ChatService initialized with model: deepseek-chat
RAG gRPC server started on 0.0.0.0:50051
```

### æ­¥éª¤ 3ï¼šå¯åŠ¨ Go åç«¯æœåŠ¡

**æ–¹æ³• Aï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰**

```bash
# åœ¨æ–°ç»ˆç«¯çª—å£ä¸­æ‰§è¡Œ
cd /Users/liang/projectljx/ragljx
./start_go.sh
```

**æ–¹æ³• Bï¼šæ‰‹åŠ¨å¯åŠ¨**

```bash
cd /Users/liang/projectljx/ragljx/ragljx_go

# è®¾ç½®ç¯å¢ƒå˜é‡
export RAGLJX_DB_HOST=localhost
export RAGLJX_DB_PORT=5432
export RAGLJX_DB_DATABASE=ragljx
export RAGLJX_DB_USERNAME=ragljx
export RAGLJX_DB_PASSWORD=ragljx_password
export RAGLJX_REDIS_HOST=localhost
export RAGLJX_REDIS_PORT=6379
export RAGLJX_KAFKA_BROKERS=localhost:19092
export RAGLJX_MINIO_ENDPOINT=localhost:9000
export RAGLJX_MINIO_ACCESS_KEY=minioadmin
export RAGLJX_MINIO_SECRET_KEY=minioadmin
export RAGLJX_GRPC_ADDRESS=localhost:50051
export RAGLJX_HTTP_PORT=8080

# å¯åŠ¨æœåŠ¡
go run cmd/server/main.go
```

**é¢„æœŸè¾“å‡º**ï¼š
```
Server started on :8080
```

### æ­¥éª¤ 4ï¼šå¯åŠ¨å‰ç«¯æœåŠ¡

```bash
# åœ¨æ–°ç»ˆç«¯çª—å£ä¸­æ‰§è¡Œ
cd /Users/liang/projectljx/ragljx/ragljx_web

# å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡ï¼‰
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

**é¢„æœŸè¾“å‡º**ï¼š
```
VITE v5.x.x  ready in xxx ms

âœ  Local:   http://localhost:5173/
âœ  Network: use --host to expose
```

## ğŸŒ è®¿é—®ç³»ç»Ÿ

### å‰ç«¯ç•Œé¢
- **URL**: http://localhost:5173
- **é»˜è®¤ç®¡ç†å‘˜è´¦å·**:
  - ç”¨æˆ·å: `admin`
  - å¯†ç : `123456`

### åç«¯ API
- **URL**: http://localhost:8080
- **API æ–‡æ¡£**: http://localhost:8080/api/v1

### ç®¡ç†ç•Œé¢
- **MinIO æ§åˆ¶å°**: http://localhost:9001
  - ç”¨æˆ·å: `minioadmin`
  - å¯†ç : `minioadmin`
- **Qdrant Dashboard**: http://localhost:6333/dashboard

## ğŸ§ª æµ‹è¯•æµç¨‹

### 1. ç™»å½•ç³»ç»Ÿ
1. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:5173
2. ä½¿ç”¨ `admin` / `123456` ç™»å½•

### 2. åˆ›å»ºçŸ¥è¯†åº“
1. ç‚¹å‡»"çŸ¥è¯†åº“ç®¡ç†"
2. ç‚¹å‡»"åˆ›å»ºçŸ¥è¯†åº“"
3. å¡«å†™çŸ¥è¯†åº“åç§°å’Œæè¿°
4. ç‚¹å‡»"ç¡®å®š"

### 3. ä¸Šä¼ æ–‡æ¡£
1. è¿›å…¥åˆšåˆ›å»ºçš„çŸ¥è¯†åº“
2. ç‚¹å‡»"ä¸Šä¼ æ–‡æ¡£"
3. é€‰æ‹©æ–‡æ¡£æ–‡ä»¶ï¼ˆæ”¯æŒ TXT, MD, PDF, DOCX, XLSX, PPTX ç­‰ï¼‰
4. ç­‰å¾…æ–‡æ¡£å¤„ç†å®Œæˆï¼ˆä¼šè°ƒç”¨åµŒå…¥æ¨¡å‹è¿›è¡Œå‘é‡åŒ–ï¼‰

### 4. å¼€å§‹å¯¹è¯
1. ç‚¹å‡»"å¯¹è¯"
2. é€‰æ‹©çŸ¥è¯†åº“
3. è¾“å…¥é—®é¢˜
4. æŸ¥çœ‹ AI å›ç­”ï¼ˆä¼šè°ƒç”¨ DeepSeek å¯¹è¯æ¨¡å‹ï¼‰

## ğŸ” æ•…éšœæ’æŸ¥

### åŸºç¡€è®¾æ–½æœåŠ¡æœªå¯åŠ¨
```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose -f docker-compose.infra.yml ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose -f docker-compose.infra.yml logs [service_name]

# é‡å¯æœåŠ¡
docker-compose -f docker-compose.infra.yml restart [service_name]
```

### Python æœåŠ¡å¯åŠ¨å¤±è´¥
```bash
# æ£€æŸ¥ä¾èµ–
cd ragljx_py
pip list

# æ£€æŸ¥é…ç½®
python -c "from app.config import config; print(config.embedding_api_key)"

# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
python main.py
```

### Go æœåŠ¡å¯åŠ¨å¤±è´¥
```bash
# æ£€æŸ¥ Go ç‰ˆæœ¬
go version

# æ£€æŸ¥ä¾èµ–
cd ragljx_go
go mod tidy

# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
go run cmd/server/main.go
```

### å‰ç«¯æ— æ³•è¿æ¥åç«¯
1. æ£€æŸ¥åç«¯æ˜¯å¦åœ¨ 8080 ç«¯å£è¿è¡Œ
2. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰ CORS é”™è¯¯
3. æ£€æŸ¥ `ragljx_web/src/api/request.js` ä¸­çš„ baseURL é…ç½®

### AI API è°ƒç”¨å¤±è´¥
1. æ£€æŸ¥ API Key æ˜¯å¦æ­£ç¡®
2. æ£€æŸ¥ API Base URL æ˜¯å¦å¯è®¿é—®
3. æŸ¥çœ‹ Python æœåŠ¡æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯

## ğŸ›‘ åœæ­¢æœåŠ¡

### åœæ­¢åŸºç¡€è®¾æ–½
```bash
docker-compose -f docker-compose.infra.yml down
```

### åœæ­¢ Python/Go/å‰ç«¯æœåŠ¡
åœ¨å¯¹åº”çš„ç»ˆç«¯çª—å£æŒ‰ `Ctrl+C`

## ğŸ“Š ç«¯å£å ç”¨æƒ…å†µ

| æœåŠ¡ | ç«¯å£ | è¯´æ˜ |
|------|------|------|
| å‰ç«¯ | 5173 | Vue å¼€å‘æœåŠ¡å™¨ |
| Go åç«¯ | 8080 | HTTP API |
| Python AI | 50051 | gRPC æœåŠ¡ |
| PostgreSQL | 5432 | æ•°æ®åº“ |
| Redis | 6379 | ç¼“å­˜ |
| Kafka | 19092 | æ¶ˆæ¯é˜Ÿåˆ— |
| MinIO | 9000, 9001 | å¯¹è±¡å­˜å‚¨ |
| Qdrant | 6333, 6334 | å‘é‡æ•°æ®åº“ |

## ğŸ” é»˜è®¤è´¦å·ä¿¡æ¯

### ç³»ç»Ÿç®¡ç†å‘˜
- ç”¨æˆ·å: `admin`
- å¯†ç : `123456`
- é‚®ç®±: `admin@ragljx.com`

### MinIO
- Access Key: `minioadmin`
- Secret Key: `minioadmin`

### PostgreSQL
- ç”¨æˆ·å: `ragljx`
- å¯†ç : `ragljx_password`
- æ•°æ®åº“: `ragljx`

## ğŸ“ AI æ¨¡å‹é…ç½®

### åµŒå…¥æ¨¡å‹ï¼ˆæ–‡æ¡£å‘é‡åŒ–ï¼‰
- **API**: https://api.zhizengzeng.com/v1
- **æ¨¡å‹**: text-embedding-3-small
- **ç”¨é€”**: å°†æ–‡æ¡£è½¬æ¢ä¸ºå‘é‡å­˜å‚¨åˆ° Qdrant

### å¯¹è¯æ¨¡å‹ï¼ˆAI å¯¹è¯ï¼‰
- **API**: https://api.deepseek.com/v1
- **æ¨¡å‹**: deepseek-chat (DeepSeek-V3.2-Exp)
- **ç”¨é€”**: ç”Ÿæˆ AI å›ç­”

## ğŸ¯ ä¸‹ä¸€æ­¥

1. âœ… åŸºç¡€è®¾æ–½å·²å¯åŠ¨
2. â³ å¯åŠ¨ Python AI æœåŠ¡
3. â³ å¯åŠ¨ Go åç«¯æœåŠ¡
4. â³ å¯åŠ¨å‰ç«¯æœåŠ¡
5. â³ æµ‹è¯•å®Œæ•´æµç¨‹

---

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰

